<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover, interactive-widget=resizes-content">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#0a0a0a">
  <title>Claude PA</title>
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icon-192.png">
</head>
<body>
  <div id="viewport">

  <!-- Setup Screen -->
  <div id="setup">
    <h1>Octybot</h1>
    <p>Enter the pairing code shown on your home agent.</p>
    <input id="setup-code" type="text" placeholder="WOLF-3847" autocomplete="off" maxlength="9" style="text-align:center;font-size:24px;letter-spacing:2px;text-transform:uppercase;">
    <button id="setup-save">Pair</button>
    <p id="setup-error" style="color:var(--error);display:none;"></p>
  </div>

  <!-- Main App -->
  <div id="app">
    <header>
      <button class="header-btn" id="menu-btn" aria-label="Menu">&#9776;</button>
      <h2 id="conv-title">New Chat</h2>
      <span id="session-badge" class="session-badge hidden">
        <span class="session-dot"></span>
        Claude Code Running
        <button id="session-stop-btn" class="session-stop">Stop</button>
      </span>
      <button class="header-btn" id="settings-btn" aria-label="Settings">&#9881;</button>
    </header>

    <!-- Sidebar -->
    <div id="sidebar-overlay"></div>
    <nav id="sidebar">
      <div class="sidebar-header">
        <select id="sidebar-project-select" class="sidebar-project-select">
          <option value="__all">All Projects</option>
        </select>
        <button id="new-chat-btn">+ New</button>
      </div>
      <div id="new-chat-target" class="new-chat-target"></div>
      <div id="conv-list"></div>
    </nav>

    <!-- Messages -->
    <div id="messages">
      <div class="empty-state">
        <span>&#128172;</span>
        <p>Send a message to start</p>
      </div>
    </div>

    <!-- Input -->
    <div id="input-bar">
      <button class="input-btn" id="voice-btn" aria-label="Voice input">&#127908;</button>
      <textarea id="msg-input" rows="1" placeholder="Message Claude..."></textarea>
      <button class="input-btn" id="tts-btn" aria-label="Toggle TTS">&#128264;</button>
      <button class="input-btn" id="send-btn" aria-label="Send" disabled>&#10148;</button>
      <button class="input-btn" id="stop-btn" aria-label="Stop" style="display:none">&#9632;</button>
    </div>
  </div>
  <!-- Hands-Free Mode -->
  <div id="handsfree-overlay" class="handsfree-overlay hidden">
    <div class="handsfree-bg"></div>
    <div class="handsfree-center">
      <div id="handsfree-orb" class="handsfree-orb green"></div>
      <div id="handsfree-label" class="handsfree-label">Tap to speak</div>
    </div>
    <button id="handsfree-exit" class="handsfree-exit">Exit</button>
  </div>

  <!-- Settings Modal -->
  <div id="settings-overlay">
    <div id="settings-panel">
      <div class="settings-header">
        <h3>Settings</h3>
        <button id="settings-close">&times;</button>
      </div>
      <div class="settings-tabs">
        <button class="settings-tab active" data-tab="general">General</button>
        <button class="settings-tab" data-tab="projects">Projects</button>
      </div>

      <!-- General Tab -->
      <div id="tab-general" class="tab-pane active">
        <div class="settings-item">
          <span class="label">Device</span>
          <span class="value" id="settings-device">â€”</span>
        </div>
        <div class="settings-item">
          <span class="label">Model</span>
          <span class="value" id="settings-model">Opus</span>
        </div>
        <div class="settings-divider"></div>
        <div class="settings-section-title">Session</div>
        <div class="settings-item">
          <span class="label">Timeout</span>
          <span class="value"><input type="number" id="settings-timeout" min="1" max="168" value="24" class="settings-num-input"> hrs</span>
        </div>
        <div class="settings-item">
          <span class="label">Max Sessions</span>
          <span class="value"><input type="number" id="settings-pool-max" min="1" max="10" value="3" class="settings-num-input"></span>
        </div>
        <div class="settings-divider"></div>
        <div class="settings-section-title">Backup</div>
        <div class="settings-item snapshot-dir-item">
          <span class="label">Directory</span>
          <button id="browse-snapshot-dir" class="browse-btn">Browse</button>
        </div>
        <input type="text" id="settings-snapshot-dir" placeholder="~/.octybot/data/snapshots/" class="settings-text-input settings-snapshot-dir-input">
        <button id="settings-save-btn" class="settings-save-btn">Save Settings</button>
        <div class="settings-divider"></div>
        <div class="settings-section-title">Usage</div>
        <div id="usage-summary" class="usage-summary">Loading...</div>
        <button id="usage-detail-btn" class="usage-detail-btn">View Details</button>
        <div id="usage-detail" class="usage-detail" style="display:none">
          <div class="usage-detail-tabs">
            <button class="usage-tab active" data-tab="daily">Daily</button>
            <button class="usage-tab" data-tab="monthly">Monthly</button>
          </div>
          <div id="usage-content"></div>
        </div>
        <div class="settings-divider"></div>
        <button id="logout-btn">Unpair Device</button>
      </div>

      <!-- Projects Tab -->
      <div id="tab-projects" class="tab-pane">
        <div id="project-list-view">
          <div id="project-list"></div>
          <button id="new-project-btn" class="memory-btn" style="width:100%;margin-top:12px">+ New Project</button>
        </div>
        <div id="project-detail-view" style="display:none">
          <button id="project-back-btn" class="project-back-btn">&larr; Projects</button>
          <h4 id="project-detail-name"></h4>
          <div id="agent-list"></div>
          <button id="new-agent-btn" class="memory-btn" style="width:100%;margin-top:12px">+ New Agent</button>
          <div class="settings-divider"></div>
          <button id="delete-project-btn" class="memory-clear-btn">Delete Project</button>
        </div>
      </div>
    </div>
  </div>

  <!-- New Project Dialog -->
  <div id="new-project-overlay" class="dialog-overlay">
    <div class="dialog-panel">
      <h3>New Project</h3>
      <label class="dialog-label">Name</label>
      <input id="new-project-name" type="text" class="dialog-input" placeholder="my-project" autocomplete="off">
      <label class="dialog-label">Working Directory <span class="dialog-hint">(optional)</span></label>
      <input id="new-project-dir" type="text" class="dialog-input" placeholder="Leave empty for default">
      <div class="dialog-actions">
        <button id="new-project-cancel" class="dialog-btn dialog-btn-cancel">Cancel</button>
        <button id="new-project-create" class="dialog-btn dialog-btn-primary">Create</button>
      </div>
    </div>
  </div>

  </div>

  <script src="dist/app.js"></script>
</body>
</html>
